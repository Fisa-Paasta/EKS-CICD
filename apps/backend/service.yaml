apiVersion: v1
kind: Service
metadata:
  name: backend-service
  namespace: backend
  labels:
    app: backend-app
  annotations:
    # ELB 설정 (AWS Load Balancer Controller 사용 시)
    service.beta.kubernetes.io/aws-load-balancer-type: "nlb"  # Network Load Balancer
    service.beta.kubernetes.io/aws-load-balancer-scheme: "internet-facing"  # 인터넷 접근 가능
    service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: "true"
spec:
  type: LoadBalancer  # 외부 접근을 위한 LoadBalancer
  selector:
    app: backend-app
  ports:
  - name: http
    port: 80        # 외부에서 접근할 포트
    targetPort: 8080  # 컨테이너 포트
    protocol: TCP
  - name: https
    port: 443       # HTTPS용 (필요시)
    targetPort: 8080
    protocol: TCP
